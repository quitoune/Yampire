<div class="card" id="ajax_{{ type }}_note_see">
	<div class="card-header">
		<div class=" float-left">
    	    {{ pagination.nb_elements }} note{% if pagination.nb_elements > 1 %}s{% endif %} {% if pagination.pages_count > 0 %} - Page {{ pagination.page }} / {{ pagination.pages_count }} {% endif %}
    	</div>
    </div>
    <div class="card-body">
        <table class="table table-striped table-light table-sm">
        	<tr>
                <th>ID</th>
                <th>Notes</th>
                {% if type == 'serie' or type == 'saison' %}
                	<th>Episode</th>
                {% endif %}
                <th>
                    {% if is_granted("ROLE_ADMIN") %}
                		{{ ajouter(path('note_ajax_ajouter', {'id':objet.id, 'type':type}), false, 'btn-ajouter') | raw }}
                	{% endif %}
                </th>
            </tr>
            {% for note in notes %}
                <tr>
                    <td>{{ note.id }}</td>
                    <td>{{ note.contenu }}</td>
                    {% if type == 'serie' or type == 'saison' %}
                		<td>{{ note.episode.titreOriginal }} {{ codeEpisode(note.episode, 0) }}</td>
                    {% endif %}
                    <td>
                    	{% if is_granted("ROLE_ADMIN") %}
                    	    {{ modifier(path('note_ajax_modifier', {'note_id':note.id,'id':objet.id, 'type':type, 'page':pagination.page}), true, "btn-modifier-" ~ note.id) | raw }}
                    	{% endif %}
                    </td>
                </tr>
            {% endfor %}
        </table>

        {% if notes is empty %}
            <p class="text-info text-center">Aucune note n'est associée à
                {% if type == 'acteur' %}
                    {% if objet.sexe == 1 %}
                        cette actrice.
                    {% else %}
                        cet acteur. 
                    {% endif %}
                {% elseif type == 'episode' %}
                	cet épisode.
                {% elseif type == 'serie' or type == 'saison' %}
                    cette {{ type }}.
                {% else %}
                    ce {{ type }}.
                {% endif %}
            </p>
        {% endif %}
    </div>
	
	<div class="card-footer">
    	{% include 'outils/ajax_pagination.html.twig' %}
    </div>
</div>

{% block javascripts %} 
    <script type="text/javascript">
        $( document ).ready(function() {
            OuvrirModal('#btn-ajouter', '#modal_{{ type }}');

            {% for note in notes %}
            	OuvrirModal('#btn-modifier-' + {{ note.id }}, '#modal_{{ type }}');
            {% endfor %}
        });
    </script>
{% endblock %}
